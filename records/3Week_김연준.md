# 3Week_김연준.md

## Title: [3Week] 김연준

### 필수 미션 요구사항 분석 & 체크리스트
- [x] 호감 표시/호감 사유 변경 후, 개별 호감 표시건에 대해서, 3시간 동안은 호감 취소와 호감 사유 변경을 할 수 없도록 작업
- [x] 네이버클라우드 플랫폼을 통한 배포(도메인 없이, IP로 접속)
### 선택 미션 요구사항 분석 & 체크리스트
- [x] 호감 표시를 받았거나, 본인에 대한 호감 사유가 변경된 경우에 알림 페이지에서 확인
- [x] 각각의 알림은 생성시에 readDate가 null 이고, 사용자가 알림을 읽으면 현재 날짜로 세팅
---

- 쿨타임 기능 구현
- 알림 기능 구현
- 네이버클라우드 플랫폼을 통한 배포
### 3주차 미션 요약

---

**[접근 방법]**



- 호감 표시, 수정 시 쿨타임
  - 호감 표시를 하면 호감 수정을 3시간 뒤에 가능하게끔 LikeablePerson에 있는 modifyUnlockDate에 쿨타임 수치 주입
  - 호감 수정을 하면 canLike부터 진입하여 쿨타임 조건문을 통해 통과되면 수정 가능
  - 조건문에는 modifyUnlockDate필드를 LocalDateTime클래스의 isAfter메소드를 이용해 현재 시간과 비교하는 로직이 있음
  - modifyUnlockDate필드를 String타입으로 호감 리스트 페이지에 출력
- 알림 기능 구현
  - 호감 표시/호감 사유 변경 이벤트 발생 시점에 알림 서비스를 끼워넣어 데이터베이스에 저장시킴
  - 호감 표시는 Like타입으로 호감 수정은 ModifyAttractiveType타입으로 저장
  - 저장된 타입을 기준으로 알림을 따로 구분하여 페이지에 출력
  - 각각의 알림은 생성시에 readDate가 null 이고, 사용자가 알림을 읽으면 현재 날짜로 세팅


**[특이사항]**

아쉬웠던 점
- 호감취소 쿨타임 처리를 깜빡하고 하지 못했습니다.
- 알림 이벤트를 따로 만들어서 처리하지 않고 InstaMemberEventListener에 알림 서비스를 끼워넣는 방식으로 해결하여 가독성이 좋지 않습니다.
- 리눅스에서 빌드 할 떄 계속 테스트 FAILED가 떠서 배포를 하지 못했습니다.

궁금했던 점
- 리눅스에서 복사한 부분의 맨 앞 글자가 잘려서 나오는 바람에 테스트 실패라고 나왔습니다.리눅스에서 붙여넣기 할 때 원본을 유지할 수 있는 방법은 뭔가요?

**[Refactoring]**

- notification list 페이지 likeablePerson대신에 notifications에서 AttractiveType참조하도록 수정
- LikeablePersonService의 canCancel메소드에서 쿨타임 적용
- Notification엔티티의 readDate 로직 수정
